var sourceData73 = {"FileContents":["function intraf_out = bmmo_correct_intrafield_shift(intraf_in, options, intraf_rint)\r","% function intraf_out = bmmo_correct_intrafield_shift(intraf_in, options, intraf_rint)\r","%\r","% Correct intrafield shift and remove 6par\r","%\r","% Input\r","%   intraf_in  : overlay structure\r","%   options    : options structure\r","%   intraf_rint: option target overlay structure\r","%\r","% Output\r","%   intraf_out : overlay structure resampled at RINT/XPA positions\r","%\r","%   Any layout except 1x1\r","%   Resampling for platform : LIS\r","%      XPA (any layout)   to RINT\r","%      RINT (any layout)  to XPA & 6 par removed\r","%\r","%   Resampling for platform : OTAS\r","%      Interpolate to shifted layout (any layout) & 6 par removed\r","%\r","\r","% determine if LIS\r","if strcmp(options.platform, 'LIS')\r","    rd = 7; % round covers upto RINT shift values\r","    if round(mean(intraf_in.wd.xf),rd) == 0 % XPA to RINT case\r","\r","        % Get ml RINT layout & define bounding box in XPA\r","        [bbx, bby]  = bmmo_get_bounding_box(intraf_in);\r","        if nargin < 3\r","            intraf_rint = bmmo_shift_fields(intraf_in, options.x_shift, options.y_shift);\r","        end\r","        options.intraf_resample_options.bounding_box = [bbx; bby]';\r","        % resample XPA to RINT\r","        intraf_out  = bmmo_resample(intraf_in, intraf_rint, options.intraf_resample_options);\r","        \r","        \r","    else  %RINT to XPA case\r","        % get XPA marks for bounding box\r","        intraf_xpa = bmmo_shift_fields(intraf_in, -options.x_shift, -options.y_shift);\r","        % define bounding box in RINT\r","        [bbx, bby] = bmmo_get_bounding_box(intraf_xpa);\r","        bbx        = bbx + options.x_shift(1, 2);\r","        bby        = bby + options.y_shift(1, 2);\r","        options.intraf_resample_options.bounding_box = [bbx; bby]';\r","        % resample RINT to XPA\r","        intraf_out = bmmo_resample(intraf_in, intraf_xpa, options.intraf_resample_options);\r","        % Remove intrafield 6par and discard (result will not be added to BAO)\r","        intraf_out     = bmmo_fit_model_perwafer(intraf_out, options, 'tx', 'ty', 'ms', 'ma', 'rs', 'ra');\r","    end\r","    \r","    % determine if OTAS\r","elseif strcmp(options.platform, 'OTAS')\r","    intraf_shifted = bmmo_shift_fields(intraf_in, -options.x_shift, -options.y_shift);\r","    intraf_out     = bmmo_resample(intraf_in, intraf_shifted, options.intraf_resample_options);\r","    intraf_out     = bmmo_shift_fields( intraf_out,  options.x_shift, options.y_shift);\r","    % Remove intrafield 6par and discard (result will not be added to BAO)\r","    intraf_out     = bmmo_fit_model_perwafer(intraf_out, options, 'tx', 'ty', 'ms', 'ma', 'rs', 'ra');\r","end\r",""],"CoverageData":{"CoveredLineNumbers":[24,25,26,29,30,31,33,35,53,54,55,56,58],"UnhitLineNumbers":[38,40,42,43,44,45,47,49],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,372,18,18,0,0,18,18,18,0,18,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,354,354,354,354,0,354,0,0]}}