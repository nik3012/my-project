var sourceData216 = {"FileContents":["function [setupActionDates, setupActionIndex] = estimateSetupActionDatesFromKpis(kpis, lotDates, thresholdScale)\r","% [setupActionDates, setupActionIndex] = estimateSetupActionDatesFromKpis(kpis, lotDates, thresholdScale)\r","%\r","% Function that estimates the dates at which setup actions took place in\r","% large datasets. It looks at sudden changes in kpis above a certain\r","% threshold. The function gives the dates at which setup actions took place\r","% and the corresponding values of the indices.\r","%\r","% Input arguments:\r","% - kpis            [ array of structs ]             structs containing the kpis\r","%                                                      from the inlineSdm models\r","% - lotDates        [ array of datetimes ]           Dates of the jobs\r","% - thresholdScale  [ double ]                       Maximum allowed relative change of the kpis\r","%                                                    from one data set to the other. Changes above\r","%                                                      the threshold indicate a setup action.\r","%\r","% Output arguments:\r","% - setupActionDates       [ array of structs ]      lotDates at which setup actions were performed (kpi changes above the threshold)  \r","% - setupActionIndex       [ array of structs ]      Indices of the lotDates at which setup actions were performed \r","%                                                      (kpi changes above the threshold)\r","%\r","\r","\r","setupActionDateIndex = 1;\r","for kpiIndex = 1 : length(kpis)\r","    KPI = kpis{kpiIndex};\r","    thresholdUpdateLimit = 0.01 * max(abs(KPI));\r","    threshold = thresholdScale * abs(KPI(1));\r","    for dateIndex = 2 : length(lotDates)\r","        delta = abs(KPI(dateIndex) - KPI(dateIndex - 1));\r","        if delta >= threshold\r","            setupActionIndex{setupActionDateIndex} = dateIndex;\r","            setupActionDateIndex = setupActionDateIndex + 1;\r","        end\r","        if delta >= thresholdUpdateLimit\r","            threshold = thresholdScale * delta;\r","        end\r","    end\r","end\r","\r","setupActionIndex = unique(cell2mat(setupActionIndex));\r","setupActionDates = lotDates(setupActionIndex);\r","\r","end"],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[24,25,26,27,28,29,30,31,32,33,35,36,41,42],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}