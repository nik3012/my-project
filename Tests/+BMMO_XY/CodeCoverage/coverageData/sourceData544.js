var sourceData544 = {"FileContents":["function mlo = bmmo_apply_rec(mli, recfile, factor)\r","% function mlo = bmmo_apply_rec(mli, recfile, factor)\r","%\r","% Apply rec from ADEL xml file on the input overlay structure\r","%\r","% Input\r","%   mli: overlay structure\r","%   recfile: full path of ADELreticleErrorCorrection xml file\r","%\r","% Optional input\r","%   factor: scaling factor (default: 1)\r","%\r","% Output:\r","%   out: mlo: input overlay structure with REC applied\r","%\r","% 20170425 SBPR Added scaling factor and documentation\r","% 20170509 SBPR Added multi-layer support\r","\r","if nargin < 3\r","    factor = 1;\r","end\r","\r","% load the rec file\r","recdata = xml_load(recfile);\r","[xy, dxy] = bmmo_get_nominal_from_wec_rec(recdata);\r","\r","% convert it to ml_field\r","ml_field.wd.xf = xy(:,1);\r","ml_field.wd.yf = xy(:,2);\r","ml_field.wd.xw = ml_field.wd.xf;\r","ml_field.wd.yw = ml_field.wd.yf;\r","ml_field.wd.xc = zeros(size(ml_field.wd.xf));\r","ml_field.wd.yc = ml_field.wd.xc;\r","\r","ml_field.tlgname = 'rec';\r","\r","ml_field.nwafer = 1;\r","ml_field.nfield = 1;\r","ml_field.nlayer = mli.nlayer;\r","ml_field.nmark = length(ml_field.wd.xf);\r","\r","for il = 1:ml_field.nlayer \r","    ml_field.layer(il).wr.dx = dxy(:,1) * 0;\r","    ml_field.layer(il).wr.dy = dxy(:,2) * 0;\r","end\r","\r","% only apply rec to the 'top' layer\r","ml_field.layer(ml_field.nlayer).wr.dx = dxy(:,1) * factor;\r","ml_field.layer(ml_field.nlayer).wr.dy = dxy(:,2) * factor;\r","\r","mlo = ovl_sub_field(mli, ml_field);"],"CoverageData":{"CoveredLineNumbers":[19,20,24,25,28,29,30,31,32,33,35,37,38,39,40,42,43,44,48,49,51],"UnhitLineNumbers":[],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,4,4,0,0,4,4,4,4,4,4,0,4,0,4,4,4,4,0,4,4,4,0,0,0,4,4,0,4]}}