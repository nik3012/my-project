var sourceData483 = {"FileContents":["\r","function mlp_d25 = bmmo_get_dyna25_layout(mlp, options)\r","% function mlp_d25 = bmmo_get_dyna25_layout(mlp, options)\r","%\r","% Downsample the sparse fields in the BMMO-NXE layout from 7x7 to dyna 25\r","%\r","% Input:\r","%   mlp: field-reconstructed BMMO-NXE layout as output by\r","%       bmmo_process_input\r","%   options: bmmo-nxe options structure\r","%\r","% Output:\r","%   mlp_d25: mlp with 7x7 fields downsampled to dyna25\r","%\r","% 20170720 SBPR Creation\r","\r","mlp_d25 = mlp;\r","\r","% downsample the relevant fields from mlp\r","dense_fields = [options.fid_intrafield, options.fid_left_right_edgefield, options.fid_top_bottom_edgefield];\r","sparse_fields = setdiff(1:mlp.nfield, dense_fields);\r","\r","% get the IDs of all marks that correspond to the sparse data fields \r","sparse_data = ovl_get_fields(mlp, sparse_fields);\r","spids = knnsearch([mlp.wd.xw mlp.wd.yw], [sparse_data.wd.xw sparse_data.wd.yw] );\r","\r","sp_logindex = false(size(mlp.wd.xw));\r","sp_logindex(spids) = true;\r","\r","% get the IDs of all marks that do NOT correspond to dyna25 fields\r","dyna_25_field = ovl_get_fields(ovl_get_layout(ovl_create_dummy('nwafer', 1, 'nlayer', 1)), 1);\r","bmmo_field = ovl_get_fields(ovl_get_wafers(mlp,1),1);\r","\r","fids = knnsearch([bmmo_field.wd.xf bmmo_field.wd.yf], [dyna_25_field.wd.xf dyna_25_field.wd.yf] );\r","\r","f_logindex = true(size(bmmo_field.wd.xf));\r","f_logindex(fids) = false;\r","f_logindex = repmat(f_logindex, 1, mlp.nfield);\r","\r","f_logindex = reshape(f_logindex, [], 1);\r","\r","% AND them and map the result on overlay data\r","d25_index = f_logindex & sp_logindex;\r","\r","for iw = 1:mlp.nwafer\r","   mlp_d25.layer.wr(iw).dx(d25_index) = NaN;\r","   mlp_d25.layer.wr(iw).dy(d25_index) = NaN;\r","end\r","\r","\r","\r",""],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[17,20,21,24,25,27,28,31,32,34,36,37,38,40,43,45,46,47],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}