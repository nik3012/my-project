var sourceData390 = {"FileContents":["function kpi_res = bmmo_parse_kpi_res_lis(kpi_rep, stats_rep)\r","%\r","% function kpi_res = bmmo_parse_kpi_res_lis(kpi_rep, stats_rep)\r","%\r","%Given the Correction quality KPIs and statistics (99.7, M3s, Max, 3s) from the LIS job report, parse the\r","%contents into a BMMO-NXE kpi structure\r","% Input:\r","%   kpi_rep  :  correction quality KPIs (99.7, M3s)  \r","%   stats_rep:  correction quality KPIs (Max, 3s) \r","%\r","% Output:\r","%   kpi_res:  KPI (99.7, M3s, Max, 3s) correction quality structure as generated by\r","%   BMMO model\r","%\r","% Changelog\r","% 20200812  ANBZ Creation\r","\r","% field names in job report and MATLAB\r","res_fields = {'ResidualOverlayMetrics','ResidualInterfield','ResidualIntrafield'};\r","kpi_res_fields = {'overlay','interfield','intrafield'};\r","\r","% Correction quality overlay metrics (99.7, M3s)  \r","kpi_res.(kpi_res_fields{1}) = bmmo_parse_kpi_overlay_lis(kpi_rep(1).(res_fields{1}),kpi_rep(2).(res_fields{1}),'kpi');\r","% Correction quality interfield metrics (99.7, M3s)  \r","kpi_res.(kpi_res_fields{2}) = sub_parse_kpi_res_interfield(kpi_rep(1).(res_fields{2}),kpi_rep(2).(res_fields{2}));\r","% Correction quality intrafield metrics (99.7, M3s)  \r","kpi_res.(kpi_res_fields{3}) = sub_parse_kpi_res_intrafield(kpi_rep(1).(res_fields{3}), kpi_rep(2).(res_fields{3}));\r","\r","% Correction quality overlay metrics (Max, 3s)\r","kpi_res1.(kpi_res_fields{1}) = bmmo_parse_kpi_overlay_lis(stats_rep(1).(res_fields{1}),stats_rep(2).(res_fields{1}),'kpi2');\r","% Correction quality interfield metrics (Max, 3s)\r","kpi_res1.(kpi_res_fields{2}) = sub_parse_pi_res_interfield(stats_rep(1).(res_fields{2}),stats_rep(2).(res_fields{2}));\r","% Correction quality intrafield metrics (Max, 3s)\r","kpi_res1.(kpi_res_fields{3}) = sub_parse_pi_res_intrafield(stats_rep(1).(res_fields{3}), stats_rep(2).(res_fields{3}));\r","\r","for ifd = 1:length(kpi_res_fields)\r","    kpi_res.(kpi_res_fields{ifd}) = bmmo_add_missing_fields(kpi_res.(kpi_res_fields{ifd}), kpi_res1.(kpi_res_fields{ifd}));\r","end\r","\r","% SUB FUNCTIONS\r","% kpi functions\r","function kpi_inter = sub_parse_kpi_res_interfield(kpi_res_inter1,kpi_res_inter2)\r","\r","chucks = {'chk1', 'chk2'};\r","\r","for ic = 1\r","    kpi_inter.(['ovl_grid_' chucks{ic} '_res_997_x']) = str2double(kpi_res_inter1.ExposureGrid.('Max99.7').X) * 1e-9;\r","    kpi_inter.(['ovl_grid_' chucks{ic} '_res_997_y']) = str2double(kpi_res_inter1.ExposureGrid.('Max99.7').Y) * 1e-9;\r","end\r","\r","for ic = 2\r","    kpi_inter.(['ovl_grid_' chucks{ic} '_res_997_x']) = str2double(kpi_res_inter2.ExposureGrid.('Max99.7').X) * 1e-9;\r","    kpi_inter.(['ovl_grid_' chucks{ic} '_res_997_y']) = str2double(kpi_res_inter2.ExposureGrid.('Max99.7').Y) * 1e-9;\r","end\r","\r","\r","function kpi_intra = sub_parse_kpi_res_intrafield(kpi_res_intra1, kpi_res_intra2)\r","\r","chucks = {'chk1', 'chk2'};\r","dims = {'x', 'y'};\r","dims_rep = {'X', 'Y'};\r","\r","for ic = 1\r","    for id = 1:2\r","        kpi_intra.(['ovl_exp_field_HO_res_' dims{id} '_res_' chucks{ic}]) =  str2double(kpi_res_intra1.After.(dims_rep{id})) * 1e-9;\r","    end\r","end\r","\r","for ic = 2\r","    for id = 1:2\r","        kpi_intra.(['ovl_exp_field_HO_res_' dims{id} '_res_' chucks{ic}]) =  str2double(kpi_res_intra2.After.(dims_rep{id})) * 1e-9; \r","    end\r","end\r","\r","\r","% stats functions\r","\r","function kpi_inter = sub_parse_pi_res_interfield(stat_res_inter1,stat_res_inter2)\r","\r","chucks = {'chk1', 'chk2'};\r","\r","for ic = 1\r","     kpi_inter.(['ovl_exp_ytx_max_wafer_' chucks{ic}]) =  str2double(stat_res_inter1.YTX.Wafer.Max) * 1e-9;\r","     kpi_inter.(['ovl_exp_xty_max_wafer_' chucks{ic}]) =  str2double(stat_res_inter1.XTY.Wafer.Max) * 1e-9;   \r","end\r","\r","for ic = 2\r","    kpi_inter.(['ovl_exp_ytx_max_wafer_' chucks{ic}]) =  str2double(stat_res_inter2.YTX.Wafer.Max) * 1e-9;\r","    kpi_inter.(['ovl_exp_xty_max_wafer_' chucks{ic}]) =  str2double(stat_res_inter2.XTY.Wafer.Max) * 1e-9;   \r","end\r","\r","\r","function kpi_intra = sub_parse_pi_res_intrafield(stat_res_intra1, stat_res_intra2)\r","\r","chucks = {'chk1', 'chk2'};\r","dims = {'x', 'y'};\r","dims_rep = {'X', 'Y'};\r","\r","for ic = 1\r","    for id = 1:2\r","         kpi_intra.(['ovl_exp_field_HO_res_' dims{id} '_before_' chucks{ic}]) = str2double(stat_res_intra1.Before.(dims_rep{id})) * 1e-9;        \r","         kpi_intra.(['ovl_exp_field_HO_res_' dims{id} '_delta_' chucks{ic}]) =  str2double(stat_res_intra1.Delta.(dims_rep{id})) * 1e-9;   \r","    end\r","end\r","\r","for ic = 2\r","    for id = 1:2\r","        kpi_intra.(['ovl_exp_field_HO_res_' dims{id} '_before_' chucks{ic}]) = str2double(stat_res_intra2.Before.(dims_rep{id})) * 1e-9;\r","        kpi_intra.(['ovl_exp_field_HO_res_' dims{id} '_delta_' chucks{ic}]) =  str2double(stat_res_intra2.Delta.(dims_rep{id})) * 1e-9;   \r","    end\r","end\r","\r",""],"CoverageData":{"CoveredLineNumbers":[19,20,23,25,27,30,32,34,36,37,44,46,47,48,51,52,53,59,60,61,63,64,65,69,70,71,80,82,83,84,87,88,89,95,96,97,99,100,101,102,106,107,108,109],"UnhitLineNumbers":[],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,4,0,4,0,4,0,0,4,0,4,0,4,0,4,12,0,0,0,0,0,0,4,0,4,4,4,0,0,4,4,4,0,0,0,0,0,4,4,4,0,4,4,8,0,0,0,4,4,8,0,0,0,0,0,0,0,0,4,0,4,4,4,0,0,4,4,4,0,0,0,0,0,4,4,4,0,4,4,8,8,0,0,0,4,4,8,8,0,0,0,0]}}