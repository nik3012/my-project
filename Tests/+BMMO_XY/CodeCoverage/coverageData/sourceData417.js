var sourceData417 = {"FileContents":["function mlo = bmmo_map_shifted_layouts(mli, mlt, shift)\r","% function mlo = bmmo_map_shifted_layouts(mli, mlt, shift)\r","%\r","% Map layout mli to mlt using a KD search tree, copying the overlay data to the new layout,\r","% returning the result in mlo\r","%\r","% Input\r","%   mli: input overlay structure\r","%   mlt: target overlay structure\r","%\r","% Optional input\r","%   shift: threshold distance for shift in m (default: 1e-5)\r","%\r","% Output\r","%   mlo: mli mapped to layout of mlt\r","%\r","% 20170516 SBPR Creation\r","\r","if nargin < 3\r","    shift = 0.002;\r","end\r","\r","mlo = mli;\r","mlo.wd = mlt.wd;\r","mlo.nfield = mlt.nfield;\r","mlo.nmark = mlt.nmark;\r","\r","layout_in = [mli.wd.xw mli.wd.yw];\r","target_layout = [mlt.wd.xw mlt.wd.yw];\r","\r","[I, D] = knnsearch(target_layout, layout_in);\r","\r","% assert(all(D < shift));\r","% assert(length(unique(I)) == length(I));\r","\r","valid = D < shift;\r","\r","default_overlay = nan * mlt.layer(1).wr(1).dx;\r","\r","for il = 1:mli.nlayer\r","    for iw = 1:mli.nwafer\r","        mlo.layer(il).wr(iw).dx = default_overlay;\r","        mlo.layer(il).wr(iw).dy = default_overlay;\r","        mlo.layer(il).wr(iw).dx(I(valid)) = mli.layer(il).wr(iw).dx(valid);\r","        mlo.layer(il).wr(iw).dy(I(valid)) = mli.layer(il).wr(iw).dy(valid);\r","    end\r","end"],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[19,20,23,24,25,26,28,29,31,36,38,40,41,42,43,44,45],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}