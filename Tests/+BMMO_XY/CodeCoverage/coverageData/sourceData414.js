var sourceData414 = {"FileContents":["\r","function [mlo, pars] = bmmo_get_kfactors_from_MDL(mdlpath, ml)\r","% function kfactors = bmmo_get_kfactors_from_MDL(mdlpath, ml)\r","%\r","% Given an MDL with k-factor information, extract the k_factors in\r","% BMMO-NXE format\r","%\r","% Input\r","%   mdlpath: full path of MDL file\r","%   ml: overlay structure \r","%\r","% Output:\r","%   mlo: ml output containing (in mlo.info.report_data) the relevant WH information\r","%   from the MDL file in BMMO-NXE input format\r","%\r","% 20160916 SBPR Creation\r","\r","mlo = ml;\r","\r","pars = ovl_whc_get_parameters_from_mdl(mdlpath);\r","mdl_KG_exp_in  = mdl_read_nxe(mdlpath,'tag','KG-EA01');\r","\r","pars_WHC = pars;\r","% remove rexpose fields from kfactors\r","reexp = zeros(size(pars_WHC.kfactors));\r","for ir = 1:length(pars_WHC.kfactors)\r","    if strcmp(mdl_KG_exp_in{ir}.dat.is_reexpose_scan, 'TRUE')\r","        reexp(ir) = 1;\r","    end\r","end\r","\r","reexp = logical(reexp);\r","pars_WHC.kfactors = pars_WHC.kfactors(~reexp);\r","\r","\r","% remove the WH fingerprint before input if whc has not been applied\r","% if pars_WHC.kg_iwhc == 0\r","%     error('WH fingerprint not already removed from data');\r","%     %mlo = ovl_add(mlo, ml_wh_fp);\r","% end\r","\r","kf = pars_WHC.kfactors_all(~logical(pars_WHC.kg_input.is_reexpose));\r","        \r","%exclude k13 and k20\r","Numfield = length(kf) / ml.nwafer; % this might be greater than the number of fields in the wafer\r","\r","K_list={'k1','k2','k3','k4','k5','k6','k7','k8','k9','k10','k11','k12','k13', 'k14','k15','k16','k17','k18','k19', 'k20'};\r","\r","for iwaf = 1:ml.nwafer\r","    for ifield=1:ml.nfield\r","        for j=[1:12 14:19]\r","            kfactors.wafer(iwaf).field(ifield).(K_list{j})=kf{Numfield*(iwaf-1)+ifield}(j);\r","        end\r","    end\r","end\r","\r","mlo.info.report_data.WH_K_factors = bmmo_k_factors_to_xml(kfactors, mlo.nwafer, mlo.nfield);\r","mlo.info.report_data.t =  pars_WHC.Twaf;\r","mlo.info.report_data.r =  pars_WHC.Rwaf;\r","mlo.info.report_data.Tret =  pars_WHC.Tret;\r","mlo.info.report_data.Pdgl =  pars_WHC.Pdgl;\r","mlo.info.report_data.SLIP =  pars_WHC.Peuv / 0.026;\r","mlo.info.report_data.Rir2uev = pars_WHC.IR2EUV_old;\r",""],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[18,20,21,23,25,26,27,28,32,33,42,45,47,49,50,51,52,57,58,59,60,61,62,63],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}