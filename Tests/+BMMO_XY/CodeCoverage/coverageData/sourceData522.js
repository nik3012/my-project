var sourceData522 = {"FileContents":["function options = bmmo_parse_apply_SBC_to_ml_options(ml_template, options)\r","% function options = bmmo_parse_apply_SBC_to_ml(ml_template, options)\r","%\r","% This function updates the options structure with the info needed for\r","% bmmo_apply_SBC_to_ml, found in ml_template.\r","% The expected data is:\r","% ml_template.info.F.chuck_id: {'CHUCK_ID_1', 'CHUCK_ID_2'} (1 x nwafer)\r","% ml_template.info.report_data.Scan_direction: [1 -1 1 -1 1 1] (nfield x 1)\r","% ml_template.expinfo.field_size: [x, y]\r","% WH data from ADELwaferHeatingCorrectionsReport imported using bmmo_kt_process_adelwhc_input\r","%\r","% For missing fields, it will fallback to bmmo default values.\r","%\r","% Input:\r","% ml_template: input ml structure\r","% options: bmmo/bl3 options structure\r","% \r","% Output:\r","% options: updated bmmo/bl3 options structure\r","\r","try\r","    options.chuck_usage = bmmo_determine_chuck_usage(ml_template);\r","catch\r","    options.chuck_usage.chuck_id = options.chuck_usage.chuck_id(1:ml_template.nwafer);\r","    options.chuck_usage = bmmo_get_chuck_id_used(options.chuck_usage);\r","    options.chuck_usage.nr_chuck_used = length(unique(options.chuck_usage.chuck_id));\r","    warning('No chuck usage available in ml_template, unsing chuck order in (default) BMMO options');     \r","end\r","\r","try\r","    options.Scan_direction = ml_template.info.report_data.Scan_direction;\r","catch\r","    options.Scan_direction = options.Scan_direction(1:ml_template.nfield);\r","    options.Scan_direction = repmat(options.Scan_direction, [1, ml_template.nlayer]);\r","    warning('No Scan direction available in ml_template, using scan direction in (default) BMMO options');\r","end\r","\r","try\r","    options.fieldsize = [ml_template.info.F.image_size.x ml_template.info.F.image_size.y];\r","catch\r","    warning('No field size available in ml_template, using BMMO field size');\r","end\r","\r","try\r","    options = bmmo_ml_options_wh(ml_template, options);\r","    options = bmmo_wh_options(ml_template, options);\r","catch\r","    warning('No WH info available in ml, using 0 WH fingerprint');\r","    if isfield(options.WH, 'input_fp_per_chuck')\r","        options.WH = rmfield(options.WH, 'input_fp_per_chuck');\r","    end\r","    options.WH.fp = ovl_create_dummy(ml_template);\r","    for ichuck = 1 : length(options.chuck_usage.chuck_id_used)\r","        options.WH.input_fp_per_chuck(options.chuck_usage.chuck_id_used(ichuck)) = ovl_get_wafers(options.WH.fp, 1);\r","    end\r","    options.previous_correction.IR2EUV = 0;\r","    options.IR2EUVsensitivity = 1;\r","end"],"CoverageData":{"CoveredLineNumbers":[21,22,23,24,25,26,27,30,31,32,33,34,35,38,39,40,41,44,45,47,48,49,50,52,53,54,56,57],"UnhitLineNumbers":46,"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,1,1,1,1,1,0,0,3,3,1,1,1,1,0,0,3,3,3,3,0,0,3,3,0,3,3,3,1,0,3,3,6,0,3,3,0]}}