var sourceData341 = {"FileContents":["classdef testBmmoYResample < BMMO_XY.tools.testSuite\r","    \r","    methods(Static)\r","        %% Sub function\r","        function [ml, field_geo] = sub_get_resample_input(nwafer)            \r","            ml = ovl_average_fields(ovl_create_dummy('marklayout','BA-XY-DYNA-13X19','nlayer',1,'nwafer',nwafer));            \r","            field_geo.W       = max(ml.wd.xf) - min(ml.wd.xf);\r","            field_geo.x_resol = length(unique(ml.wd.xf));\r","            field_geo.y_resol = length(unique(ml.wd.yf));\r","        end\r","        \r","    end  \r","    \r","    methods(Test)\r","\r","        %% This represents the use case where image is smaller than full field and shifted to the bottom of field\r","        function Case1(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer            = 2;\r","            [ml, field_geo]   = obj.sub_get_resample_input(nwafer);\r","            image_y_shift     = -0.0090000000000000002; % Manipulated to circumvent rounding issues\r","            field_geo.H       = 15e-3;            \r","            tmp_y             = ml.wd.yw;\r","            tmp_x             = ml.wd.xw;\r","            y_new             = (2*pi)/(max(tmp_y) - min(tmp_y))*(tmp_y - min(tmp_y));\r","            x_new             = (2*pi)/(max(tmp_x) - min(tmp_x))*(tmp_x - min(tmp_x));\r","            ml.layer.wr(1).dx = cos(x_new)*1e-9;\r","            ml.layer.wr(1).dy = sin(y_new)*1e-9;\r","            ml.layer.wr(2).dx = sin(x_new)*1e-9;\r","            ml.layer.wr(2).dy = cos(y_new)*1e-9;\r","            \r","            % When\r","            test_resampled_ml_1 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_1,test_resampled_ml_1);\r","        end\r","        \r","        %% This represents the use case where image is smaller than full field and shifted to the top of field\r","        function Case2(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = 0.009000000000001; % Manipulated to circumvent rounding issues\r","            field_geo.H     = 15e-3;            \r","            tmp_y           = ml.wd.yw;\r","            tmp_x           = ml.wd.xw;\r","            y_new           = (2*pi)/(max(tmp_y) - min(tmp_y))*(tmp_y - min(tmp_y));\r","            x_new           = (2*pi)/(max(tmp_x) - min(tmp_x))*(tmp_x - min(tmp_x));\r","            ml.layer.wr.dx  = cos(x_new)*1e-9;\r","            ml.layer.wr.dy  = sin(y_new)*1e-9;         \r","            \r","            % When\r","            test_resampled_ml_2 = bmmo_y_resample(ml, field_geo, image_y_shift);  \r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_2, test_resampled_ml_2);\r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image size fits completely inside the SDM disto map\r","        function Case3(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = -12.3e-3;\r","            field_geo.H     = 6.436e-3;\r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;\r","            \r","            % When\r","            test_resampled_ml_3 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_3, test_resampled_ml_3);\r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image is exactly at the bottom edge of the SDM disto map       \r","        function Case4(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = -13.0e-3;\r","            field_geo.H     = 6.436e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;          \r","            \r","            % When\r","            test_resampled_ml_4 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_4, test_resampled_ml_4);\r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image is exactly at the top edge of the SDM disto map        \r","        function Case5(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = +13.0e-3;\r","            field_geo.H     = 6.436e-3;           \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;  \r","            \r","            % When\r","            test_resampled_ml_5 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_5, test_resampled_ml_5);\r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image is beyond the bottom edge of the SDM disto map, but still within the full field (33.0 mm)\r","        % In this case, the offsets of nearest neighbor + extrapolation will be used.        \r","        function Case6(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = -13.1e-3;\r","            field_geo.H     = 6.436e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;            \r","            \r","            % When\r","            test_resampled_ml_6 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_6, test_resampled_ml_6);\r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image is beyond the top edge of the SDM disto map, but still within the full field (33.0 mm)\r","        % In this case, the offsets of nearest neighbor + extrapolation will be used.\r","        function Case7(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = +13.1e-3;\r","            field_geo.H     = 6.436e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;     \r","            \r","            % When\r","            test_resampled_ml_7 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","\r","            % Then\r","            obj.verifyWithinTol(resampled.ml_7, test_resampled_ml_7);\r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image is beyond the bottom edge of the SDM disto map, exactly at the top of the full field (33.0 mm)\r","        % In this case, the offsets of nearest neighbor + extrapolation will be used.\r","        function Case8(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = -0.009;\r","            field_geo.H     = 15e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;            \r","            \r","            % When\r","            test_resampled_ml_8 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_8, test_resampled_ml_8);\r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image is beyond the top edge of the SDM disto map, exactly at the top of the full field (33.0 mm)\r","        % In this case, the offsets of nearest neighbor + extrapolation will be used.\r","        function Case9(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = +0.009;\r","            field_geo.H     = 15e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;\r","            \r","            % When\r","            test_resampled_ml_9 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_9, test_resampled_ml_9);\r","            \r","        end\r","        \r","        %% image_y_shift and field_geo.H chosen so that the image is completely outside the SDM disto map, but still inside the full field. \r","        % In this case, no interpolation is used, but only extrapolation.\r","        function Case10(obj)\r","            % Given\r","            load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","            nwafer          = 1;\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = -16.3e-3;\r","            field_geo.H     = 0.2e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;  \r","            \r","            % When\r","            test_resampled_ml_10 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","            \r","            % Then\r","            obj.verifyWithinTol(resampled.ml_10, test_resampled_ml_10);\r","        end\r","\r","        %% This represents the use case where image is smaller than full field and shifted below the bottom of field, This use case is not \r","        % supported and TS should throw an error in this situation.\r","        function Case11(obj)\r","            % Given\r","            nwafer          = 1;\r","            \r","            % When\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = -10e-3;\r","            field_geo.H     = 15e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;\r","            \r","            % Then\r","            obj.verifyError(@() bmmo_y_resample(ml, field_geo, image_y_shift), '');\r","        end\r","\r","        %% This represents the use case where image is smaller than full field and shifted above the top of field, This use case is not \r","        % supported and TS should throw an error in this situation.\r","        function Case12(obj)\r","            % Given\r","            nwafer          = 1;\r","            \r","            % When\r","            [ml, field_geo] = obj.sub_get_resample_input(nwafer);\r","            image_y_shift   = +10e-3;\r","            field_geo.H     = 15e-3;            \r","            ml.layer.wr.dy  = ml.wd.yw*1e-7;\r","            ml.layer.wr.dx  = ml.wd.xw*1e-7;\r","            \r","            % Then\r","            obj.verifyError(@() bmmo_y_resample(ml, field_geo, image_y_shift), '');\r","        end\r","        \r","    end\r","    \r","end"],"CoverageData":{"CoveredLineNumbers":[6,7,8,9,19,20,21,22,23,24,25,26,27,28,29,30,31,34,37,43,44,45,46,47,48,49,50,51,52,53,56,59,65,66,67,68,69,70,71,74,77,83,84,85,86,87,88,89,92,95,101,102,103,104,105,106,107,110,113,120,121,122,123,124,125,126,129,132,139,140,141,142,143,144,145,148,151,158,159,160,161,162,163,164,167,170,177,178,179,180,181,182,183,186,189,197,198,199,200,201,202,203,206,209,216,219,220,221,222,223,226,233,236,237,238,239,240,243],"UnhitLineNumbers":[],"HitCount":[0,0,0,0,0,12,12,12,12,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,0,0,1,0,0,0,0,0]}}