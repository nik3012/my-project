var sourceData45 = {"FileContents":["function x_out = bmmo_base_spline(x, x_start, x_end, nr_segments, options)\r","% function x_out = bmmo_base_spline(x, x_start, x_end, nr_segments, options)\r","%\r","% Wrapper for ovl_metro_base_spline, allowing selection of splines and\r","% manipulation of the spline matrix\r","%\r","% Input:\r","%   x            vector of x positions\r","%   x_start      Start position of spline\r","%   x_end        End position of spline\r","%   nr_segments  Number of segments in the spline\r","%   options      BMMO/BL3 options structure, containing at least the\r","%      following fields:\r","%           extra_splines: 1*4 double array with the following values\r","%               0/1/2   constant extrapolation 1 absent/present/present and reversed\r","%               0/1/2   constant extrapolation 2\r","%               0/1/2   translation absent/present/present and reversed\r","%                           (reversed is meaningless)\r","%               0/1/2   rotation absent/present/present and reversed\r","%\r","% Output:\r","%   x_out:     length(x)*(nr_segments+1) matrix with selected base\r","%               functions\r","\r","% fill in a default value if not there already\r","try\r","    options.extra_splines;\r","catch\r","    options.extra_splines = [1 1 1 1];\r","end\r","\r","% First calculate the number of splines to retrieve from\r","% ovl_metro_base_spline, based on the sum of extra_splines\r","totalextra = sum(options.extra_splines);\r","\r","% ovl_metro_base_spline returns 4 extra splines\r","% after manipulation, the total number of splines should be nr_segments + 1\r","DEFAULT_EXTRA_SPLINES = 4;\r","requested_segments = nr_segments + (DEFAULT_EXTRA_SPLINES - totalextra);\r","\r","% get the splines\r","x_sparse = ovl_metro_base_spline(x, x_start, x_end, requested_segments);\r","x_full = full(x_sparse);\r","\r","% start with just the basic spline functions\r","x_out = x_full(:, 1:(end - DEFAULT_EXTRA_SPLINES));\r","last_basic_column = (size(x_full, 2) - DEFAULT_EXTRA_SPLINES);\r","\r","% add the selected extra splines in the requested formats\r","for is = 1:length(options.extra_splines)\r","    this_spline =  x_full(:, last_basic_column + is);\r","    switch options.extra_splines(is)\r","        case 1\r","            % just append the spline fn to the output\r","            x_out = [x_out, this_spline];\r","        case 2\r","            % append the spline fn and its reverse\r","            x_out = [x_out, this_spline, this_spline(end:-1:1)];\r","            \r","            % otherwise do nothing\r","    end\r","    \r","end\r","\r",""],"CoverageData":{"CoveredLineNumbers":[26,27,34,38,39,42,43,46,47,50,51,52,53,55,56,58],"UnhitLineNumbers":[28,29],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1559,1559,0,0,0,0,0,0,1559,0,0,0,1559,1559,0,0,1559,1559,0,0,1559,1559,0,0,1559,6236,6236,6236,0,6221,15,0,7,0,0,0,0,0,0,0]}}