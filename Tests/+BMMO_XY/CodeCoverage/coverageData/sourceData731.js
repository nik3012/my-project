var sourceData731 = {"FileContents":["function isSame = bmmo_cmp_NOK_data(A, B, prec, varname, show_output)\r","% function isSame = bmmo_cmp_NOK_data(A, B, prec, varname, show_output)\r","%\r","% Compare two double-valued scalars, vectors, or matrices, A and B,\r","% according precision PREC, with variable name VARNAME and write to file\r","% identifier FID.\r","%\r","% Author     Martin Hammer (MHcu)\r","% Created    2014-01-08\r","%\r","% History\r","%   2014-01-08 Creation\r","%   2018-05-01 SBPR refactored, cleanup\r","%   2021-01-07 ANBZ created from bmmo_cmp_data to write to file only NOKs\r","%\r","% Copyright (C) ASML Holding N.V., 2014\r","% ASML Confidential\r","\r","% handle double/single and logicals differently\r","\r","isSame = true;\r","\r","if ~isequal(class(A), class(B))\r","    isSame = false;\r","    bmmo_fprintf(show_output, '%3s : (%-7s) ( %-18s )  %s\\n', 'NOK', '', 'type mismatch', varname);\r","    \r","elseif isa(A, 'function_handle') && isa(B, 'function_handle')\r","    \r","    %bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %-18s )  %s\\n', '--', '', 'not compared', varname);\r","    \r","elseif isobject(A) && isobject(B)\r","    isSame = isequal(A, B);\r","    type_A = class(A);\r","    if length(type_A) >= 8\r","        type_A = type_A(1:8);\r","        type_A(7:8) = '..';\r","    end\r","    if ~isSame\r","        bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %-8s; %-8s )  %s\\n', 'NOK', 'cmp obj', type_A, type_A, varname);\r","    end\r","elseif xor(isempty(A),isempty(B)) % empty field present in either A or B\r","    \r","    isSame = false;\r","    if isempty(A)\r","        bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %-18s )  %s\\n', 'NOK', '', '<-- empty field', varname);\r","    else\r","        bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %-18s )  %s\\n', 'NOK', '', 'empty field -->', varname);\r","    end\r","    \r","    \r","elseif ischar(A) && ischar(B) % compare strings\r","    \r","    isSame = strcmp(A,'*') || strcmp(B,'*') || strcmp(A, B);\r","    if strcmp(A,'*')\r","        strA = '*';\r","    else\r","        strA = sprintf('%2d chars',numel(A));\r","    end\r","    if strcmp(B,'*')\r","        strB = '*';\r","    else\r","        strB = sprintf('%2d chars',numel(B));\r","    end\r","    if ~isSame\r","        bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %s; %s )  %s\\n', 'NOK', '', strA, strB, varname);\r","    end\r","    \r","elseif numel(A) ~= numel(B) % variables not of same size\r","    \r","    isSame = false;\r","    bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %-18s )  %s\\n', 'NOK', '', 'diff. size', varname);\r","    \r","elseif (isa(A,'double') && isa(B,'double')) || (isa(A,'single') && isa(B,'single')) % double- or single-precision\r","    \r","    if any(xor(isnan(A(:)),isnan(B(:)))) % if either is NaN, but other not\r","        isSame = false;\r","        bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %-18s )  %s\\n', 'NOK', 'NaN', '', varname);\r","    elseif isempty(A) && isempty(B)\r","        isSame = true;      \r","    else\r","        [diffAB,ind] = max( abs(A(:) - B(:)) ); % max of all dims (max ignores NaNs)\r","        if isnan(diffAB)\r","            isSame = true;\r","        else\r","            isSame = diffAB < prec;\r","        end\r","        if show_output\r","            diffAB = diffAB * sign(A(ind)-B(ind));\r","            if ~isSame\r","                sub_print_vec(show_output, A, B, diffAB, 'NOK', varname);\r","            end\r","        end\r","    end\r","    \r","elseif (isa(A,'logical')&&isa(B,'logical')) % binary data\r","    \r","    diffAB = all(~xor(A(:),B(:))); % all entries identical\r","    isSame = diffAB;\r","    if ~isSame\r","        sub_print_vec(show_output, A, B, diffAB, 'NOK', varname);\r","    end\r","else\r","    bmmo_fprintf(show_output, '%3s : ( %-7s ) ( %-18s )  %s\\n', '--', '', 'not compared', varname);\r","end\r","\r","\r","function sub_print_vec(show_output, A, B, diffAB, str, varname)\r","if numel(A)>1 % is matrix\r","    str_dims = sprintf('%dx', size(A)); % string of matrix dimensions\r","    bmmo_fprintf(show_output, '%3s : (%+8.2e) ( %-18s )  %s\\n', str, diffAB, str_dims(1:end-1), varname);\r","else % is scalar\r","    bmmo_fprintf(show_output, '%3s : (%+8.2e) (%+8.2e; %+8.2e)  %s\\n', str, diffAB, A, B, varname);\r","end\r","\r","\r","\r","\r",""],"CoverageData":{"CoveredLineNumbers":[21,23,27,31,41,51,68,73,75,78,80,81,82,84,85,87,88,89],"UnhitLineNumbers":[24,25,32,33,34,35,36,38,39,43,44,45,46,47,53,54,55,56,57,59,60,61,62,64,65,70,71,76,77,79,83,90,95,97,98,99,100,102,103,108,109,110,111,112],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,4,0,4,0,0,4,0,4,4,4,0,4,4,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}