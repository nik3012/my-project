var sourceData572 = {"FileContents":["function mlo = bmmo_process_adelmetrology(filename)\r","% function mlo = bmmo_process_adelmetrology(filename)\r","%\r","% Read an adelmetrology file into a 1 x n array of ml structures, where n\r","% is the number of unique target names in RecipeTargetId.TargetLabel\r","%\r","% Input: adel_input: full path of ADELmetrology input xml file\r","%\r","% Output: mlo: 1 x n array of ml structures\r","%\r","% 20160606 SBPR Creation\r","% 20190731 SELR Updated smf for consistency with lcp\r","\r","[xc, yc, xf, yf, labelid, dx, dy, validx, validy, unique_target_labels] = bmmo_parse_adelmetrology(filename);\r","\r","[~, nwafer] = size(dx);\r","\r","% Get the unique target labels in this structure\r","numtargets = length(unique_target_labels);\r","\r","mlo = repmat(struct('nwafer', nwafer, 'layer', [], 'wd', [], 'nmark', 1, 'nfield', 0, 'nlayer', 1, 'tlgname', ''), 1, numtargets);\r","\r","% Set invalid overlay data to NaN (excluding WID_UP readouts)\r","tmpvalid = false(size(validx));\r","wupid = find(strcmp(unique_target_labels, 'WID_UP'));\r","wupid = find(labelid == wupid(1));\r","tmpvalid(wupid, :) = true;\r","validx = validx | tmpvalid;\r","validy = validy | tmpvalid;\r","dx(~validx) = NaN;\r","dy(~validy) = NaN;\r","\r","for it = 1:numtargets\r","    this_target = unique_target_labels{it};\r","    mlo(it).targetlabel = this_target;\r","\r","    targetindex = (labelid == it);\r","    mlo(it).wd.xc = xc(targetindex);\r","    mlo(it).wd.yc = yc(targetindex);\r","    mlo(it).wd.xf = xf(targetindex);\r","    mlo(it).wd.yf = yf(targetindex);\r","    mlo(it).wd.xw = mlo(it).wd.xc + mlo(it).wd.xf;\r","    mlo(it).wd.yw = mlo(it).wd.yc + mlo(it).wd.yf;\r","    \r","    mlo(it).nfield = length(mlo(it).wd.xw);\r","    lindex = find(targetindex);  \r","    \r","    for iw = 1:nwafer\r","        mlo(it).layer.wr(iw).dx = dx(lindex, iw);\r","        mlo(it).layer.wr(iw).dy = dy(lindex, iw);  \r","    end\r","end\r"," \r","\r","\r","\r","\r","\r","\r","\r",""],"CoverageData":{"CoveredLineNumbers":[14,16,19,21,24,25,26,27,28,29,30,31,33,34,35,37,38,39,40,41,42,43,45,46,48,49,50],"UnhitLineNumbers":[],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,0,0,4,0,4,0,0,4,4,4,4,4,4,4,4,0,4,8,8,0,8,8,8,8,8,8,8,0,8,8,0,8,32,32,0,0,0,0,0,0,0,0,0,0,0]}}