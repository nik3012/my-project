var sourceData643 = {"FileContents":["function test_suite = test_bmmo_ewma_filter\r","\r","suite = initTestSuite2016(localfunctions);\r","if nargout==0\r","    suite.run();\r","else\r","    test_suite = suite;\r","end\r","\r","% test 1: all zeros\r","function test_bmmo_ewma_filter_all_zero\r","\r","options = bmmo_default_options_structure;\r","options.susd_control = 1;\r","\r","delta_out = bmmo_default_output_structure(options);\r","delta_corr = delta_out.corr;\r","\r","prev_out = bmmo_default_output_structure(options);\r","prev_corr = prev_out.corr;\r","\r","coefficients = bmmo_get_empty_filter;\r","nz_coefficients = coefficients;\r","nz_coefficients.BAO = 0.5;\r","nz_coefficients.WH = 0.9;\r","nz_coefficients.INTRAF = 0.1;\r","nz_coefficients.MI = 0.3;\r","nz_coefficients.SUSD = 0.9;\r","\r","new_corr = bmmo_ewma_filter(delta_corr, prev_corr, coefficients);\r","new_corr_nz_coeff = bmmo_ewma_filter(delta_corr, prev_corr, nz_coefficients);\r","\r","bmmo_assert_equal(new_corr, delta_corr);\r","bmmo_assert_equal(new_corr_nz_coeff, new_corr);\r","\r","% test 2: check BAO coefficients\r","function test_bmmo_ewma_filter_bao\r","\r","options = bmmo_default_options_structure;\r","\r","delta_out = bmmo_default_output_structure(options);\r","corr_zero = delta_out.corr;\r","\r","delta_corr_nz = corr_zero;\r","delta_corr_nz.BAO(1).TranslationX = 0.3;\r","delta_corr_nz.BAO(2).TranslationX = 0.4;\r","prev_corr_nz = corr_zero;\r","prev_corr_nz.BAO(1).TranslationX = 1;\r","prev_corr_nz.BAO(2).TranslationX = 0.9;\r","\r","coefficients = bmmo_get_empty_filter;\r","coefficients2 = coefficients;\r","coefficients2.BAO = 0.6;\r","\r","new_corr_prev_only = bmmo_ewma_filter(corr_zero, prev_corr_nz, coefficients2);\r","new_corr_new_only = bmmo_ewma_filter(delta_corr_nz, corr_zero, coefficients2);\r","new_corr_combined = bmmo_ewma_filter(delta_corr_nz, prev_corr_nz, coefficients2);\r","\r","bmmo_assert_equal(new_corr_prev_only.BAO(1).TranslationX, 1);\r","bmmo_assert_equal(new_corr_prev_only.BAO(2).TranslationX, 0.9);\r","\r","bmmo_assert_equal(new_corr_new_only.BAO(1).TranslationX, 0.3 * 0.6);\r","bmmo_assert_equal(new_corr_new_only.BAO(2).TranslationX, 0.4 * 0.6);\r","\r","bmmo_assert_equal(new_corr_combined.BAO(1).TranslationX, (0.3 * 0.6) + 1);\r","bmmo_assert_equal(new_corr_combined.BAO(2).TranslationX, (0.4 * 0.6) + 0.9);\r","\r","\r","function test_bmmo_ewma_filter_susd\r","\r","%mli = bmmo_default_input;\r","options = bmmo_default_options_structure;\r","options.susd_control = 1;\r","\r","delta_out = bmmo_default_output_structure(options);\r","corr_zero = delta_out.corr;\r","\r","delta_corr_nz = corr_zero;\r","prev_corr_nz = corr_zero;\r","\r","for ic = 1:2\r","    delta_corr_nz.SUSD(ic).TranslationY = ic;\r","    prev_corr_nz.SUSD(ic).TranslationY = 3 - ic;\r","end\r","    \r","\r","coefficients = bmmo_get_empty_filter;\r","coefficients.SUSD = 0.4;\r","\r","new_corr_prev_only = bmmo_ewma_filter(corr_zero, prev_corr_nz, coefficients);\r","new_corr_new_only = bmmo_ewma_filter(delta_corr_nz, corr_zero, coefficients);\r","new_corr_combined = bmmo_ewma_filter(delta_corr_nz, prev_corr_nz, coefficients);\r","\r","bmmo_assert_equal(new_corr_prev_only.SUSD(1).TranslationY, 2);\r","bmmo_assert_equal(new_corr_prev_only.SUSD(2).TranslationY, 1);\r","\r","bmmo_assert_equal(new_corr_new_only.SUSD(1).TranslationY, 1 * 0.4);\r","bmmo_assert_equal(new_corr_new_only.SUSD(2).TranslationY, 2 * 0.4);\r","\r","bmmo_assert_equal(new_corr_combined.SUSD(1).TranslationY, (1 * 0.4) + 2);\r","bmmo_assert_equal(new_corr_combined.SUSD(2).TranslationY, (2 * 0.4) + 1);\r",""],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[3,4,5,6,7,13,14,16,17,19,20,22,23,24,25,26,27,28,30,31,33,34,39,41,42,44,45,46,47,48,49,51,52,53,55,56,57,59,60,62,63,65,66,72,73,75,76,78,79,81,82,83,87,88,90,91,92,94,95,97,98,100,101],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}