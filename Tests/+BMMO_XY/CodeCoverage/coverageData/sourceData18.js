var sourceData18 = {"FileContents":["function [mlo, ml_res] = bmmo_KA_SBC_fingerprint(mli, fingerprint, options)\r","% function [mlo, ml_res] = bmmo_KA_SBC_fingerprint(mli, fingerprint, options)\r","%\r","% This function returns an ml structure corresponding to the input SBC\r","% KA fingerprint\r","%\r","%\r","% Input:\r","%   mli:         input ml structure\r","%   fingerprint: KA fingerprint (1x2 struct array)\r","%   options:     options structure\r","%\r","% Output:\r","%   mlo:        output ml structure containing the KA fingerprint in the same layout as mli\r","%   ml_res:     output ml structure containing the residual after KA actuation\r","%\r","% For details of the model and definitions of in/out interfaces, refer to\r","% D000810611 EDS BMMO NXE drift control model\r","\r","mlo = mli;\r","ml_res = mli;\r","\r","for ichuck = options.chuck_usage.chuck_id_used\r","    \r","    % get a grid structure from the KA fingerprint for this chuck\r","    ka_grid = bmmo_KA_corr_to_grid(fingerprint(ichuck));\r","    \r","    % for each wafer on this chuck, add the KA fingerprint\r","    wafers_this_chuck = find(options.chuck_usage.chuck_id == ichuck);\r","    wafers_this_chuck = reshape(wafers_this_chuck, 1, []); % make horizontal for R13 compatibility\r","    \r","    ilayer = 1;\r","    iwafer = 1;\r","    \r","    if nargout > 1\r","        [ml_ka, ml_ka_NCE] = feval(options.KA_actuation.fnhandle, ka_grid, ovl_get_subset(mli, ilayer, iwafer), options);\r","        for iwafer = wafers_this_chuck\r","            for ilayer = 1:length(mli.layer)\r","                ml_res.layer(ilayer).wr(iwafer).dx = ml_ka_NCE.layer.wr.dx;\r","                ml_res.layer(ilayer).wr(iwafer).dy = ml_ka_NCE.layer.wr.dy;\r","            end\r","        end\r","    else\r","        ml_ka = feval(options.KA_actuation.fnhandle, ka_grid, ovl_get_subset(mli, ilayer, iwafer), options);\r","    end\r","    for iwafer = wafers_this_chuck\r","        for ilayer = 1:length(mli.layer)\r","            mlo.layer(ilayer).wr(iwafer).dx = ml_ka.layer.wr.dx;\r","            mlo.layer(ilayer).wr(iwafer).dy = ml_ka.layer.wr.dy;\r","        end\r","    end\r","end\r","\r","% remove edge to mli\r","mlo = ovl_combine_linear(mlo, 1, mli, 0);\r","\r",""],"CoverageData":{"CoveredLineNumbers":[20,21,23,26,29,30,32,33,35,43,44,46,47,48,49,55],"UnhitLineNumbers":[36,37,38,39,40],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1131,1131,0,1131,0,0,2206,0,0,2206,2206,0,2206,2206,0,2206,0,0,0,0,0,0,0,2206,2206,0,2206,5842,5842,5842,0,0,0,0,0,1131,0,0]}}