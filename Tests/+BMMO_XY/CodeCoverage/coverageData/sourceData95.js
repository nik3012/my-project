var sourceData95 = {"FileContents":["function [mlo, coeff] = bmmo_fit_model_pw_perfield(mli, options, varargin)\r","% function [mlo, coeff] = bmmo_fit_model_pw_perfield(mli, options, varargin)\r","%\r","% Fit the given parameters to the input overlay per wafer and per field, yielding \r","% residuals mlo and fit coefficients coeff\r","%\r","% Inputs:\r","%   mli: ml overlay structure\r","%   options: options structure containing parameter table\r","%  \r","% Optional Inputs:\r","%   varargin: a variable number (possibly 0) of parameter names and\r","%             options, including the following:\r","%            '10par': fit 10par\r","%            '6par': fit 6par\r","%            'tx', 'ty', etc: parameters to fit\r","%\r","% Output: \r","%   mlo: residue after per wafer and per field removal of Interfield/Intrafield \r","%       content from mli  \r","%   coeff: q * m double matrix of fit coefficients, where q is the number of\r","%       parameters\r","%\r","% NB Make sure to call this function with valid parameter lists!\r","% NO checking is done on parameter order, duplication or validity\r","\r","mlo = mli;\r","\r","% get the field layout\r","wd_in = ovl_get_fields(mli, 1);\r","wd_in = wd_in.wd;\r","wd_in.xc = zeros(size(wd_in.xc));\r","wd_in.yc = zeros(size(wd_in.yc));\r","\r","% get dy and dy input\r","dxs = horzcat(mli.layer.wr.dx);\r","dys = horzcat(mli.layer.wr.dy);\r","\r","% reshape to put fields in columns\r","dxs = reshape(dxs, mli.nmark, []);\r","dys = reshape(dys, mli.nmark, []);\r","\r","lenx = size(dxs, 1);\r","\r","res_in = [dxs ; dys];\r","\r","[res_out, coeff] = bmmo_fit_parms(res_in, wd_in, options, varargin);\r","\r","for ilayer = 1:mli.nlayer\r","    base_layer_offset = (ilayer-1) * (mli.nwafer * mli.nfield);\r","    for iwafer = 1:mli.nwafer\r","        base_wafer_offset = ((iwafer-1) * (mli.nfield)) + base_layer_offset;\r","        columns_in_wafer = (base_wafer_offset + 1):(base_wafer_offset + mli.nfield);\r","        dxs = res_out(1:lenx, columns_in_wafer);\r","        dys = res_out((lenx+1):end, columns_in_wafer);\r","        mlo.layer(ilayer).wr(iwafer).dx = dxs(:);\r","        mlo.layer(ilayer).wr(iwafer).dy = dys(:);    \r","    end\r","end"],"CoverageData":{"CoveredLineNumbers":[27,30,31,32,33,36,37,40,41,43,45,47,49,50,51,52,53,54,55,56,57],"UnhitLineNumbers":[],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,3,3,3,3,0,0,3,3,0,0,3,3,0,3,0,3,0,3,0,3,3,3,13,13,13,13,13,13,0,0]}}