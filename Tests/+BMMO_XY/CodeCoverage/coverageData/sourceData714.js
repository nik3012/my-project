var sourceData714 = {"FileContents":["function test_suite = test_bmmo_y_resample\r","suite = initTestSuite2016(localfunctions);\r","if nargout==0\r","    suite.run();\r","else\r","    test_suite = suite;\r","end\r","\r","\r","% This represents the use case where image is smaller than full field and \r","% shifted to the bottom of field\r","function test_bmmo_y_resample_case1\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 2;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = -0.0090000000000000002; % Manipulated to circumvent rounding issues\r","field_geo.H    = 15e-3;\r","\r","tmp_y = ml.wd.yw;\r","tmp_x = ml.wd.xw;\r","y_new = (2*pi)/(max(tmp_y) - min(tmp_y))*(tmp_y - min(tmp_y));\r","x_new = (2*pi)/(max(tmp_x) - min(tmp_x))*(tmp_x - min(tmp_x));\r","ml.layer.wr(1).dx = cos(x_new)*1e-9;\r","ml.layer.wr(1).dy = sin(y_new)*1e-9;\r","ml.layer.wr(2).dx = sin(x_new)*1e-9;\r","ml.layer.wr(2).dy = cos(y_new)*1e-9;\r","\r","test_resampled_ml_1 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_1,test_resampled_ml_1);\r","\r","\r","% This represents the use case where image is smaller than full field and \r","% shifted to the top of field\r","function test_bmmo_y_resample_case2\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = 0.009000000000001; % Manipulated to circumvent rounding issues\r","field_geo.H    = 15e-3;\r","\r","tmp_y = ml.wd.yw;\r","tmp_x = ml.wd.xw;\r","y_new = (2*pi)/(max(tmp_y) - min(tmp_y))*(tmp_y - min(tmp_y));\r","x_new = (2*pi)/(max(tmp_x) - min(tmp_x))*(tmp_x - min(tmp_x));\r","ml.layer.wr.dx = cos(x_new)*1e-9;\r","ml.layer.wr.dy = sin(y_new)*1e-9;\r","\r","test_resampled_ml_2 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_2, test_resampled_ml_2);\r","\r","% image_y_shift and field_geo.H chosen so that the image size fits \r","% completely inside the SDM disto map\r","function test_bmmo_y_resample_case3\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = -12.3e-3;\r","field_geo.H    = 6.436e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_3 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_3, test_resampled_ml_3);\r","\r","\r","% image_y_shift and field_geo.H chosen so that the image is exactly at the \r","% bottom edge of the SDM disto map\r","function test_bmmo_y_resample_case4\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = -13.0e-3;\r","field_geo.H    = 6.436e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_4 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_4, test_resampled_ml_4);\r","\r","\r","% image_y_shift and field_geo.H chosen so that the image is exactly at the\r","% top edge of the SDM disto map\r","function test_bmmo_y_resample_case5\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = +13.0e-3;\r","field_geo.H    = 6.436e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_5 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_5, test_resampled_ml_5);\r","\r","% image_y_shift and field_geo.H chosen so that the image is beyond the\r","% bottom edge of the SDM disto map, but still within the full field (33.0 mm)\r","% In this case, the offsets of nearest neighbor + extrapolation will be used.\r","function test_bmmo_y_resample_case6\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = -13.1e-3;\r","field_geo.H    = 6.436e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_6 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_6, test_resampled_ml_6);\r","\r","\r","% image_y_shift and field_geo.H chosen so that the image is beyond the\r","% top edge of the SDM disto map, but still within the full field (33.0 mm)\r","% In this case, the offsets of nearest neighbor + extrapolation will be used.\r","function test_bmmo_y_resample_case7\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = +13.1e-3;\r","field_geo.H    = 6.436e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_7 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_7, test_resampled_ml_7);\r","\r","\r","% image_y_shift and field_geo.H chosen so that the image is beyond the\r","% bottom edge of the SDM disto map, exactly at the top of the full field (33.0 mm)\r","% In this case, the offsets of nearest neighbor + extrapolation will be used.\r","function test_bmmo_y_resample_case8\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = -0.009;\r","field_geo.H    = 15e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_8 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_8, test_resampled_ml_8);\r","\r","\r","% image_y_shift and field_geo.H chosen so that the image is beyond the\r","% top edge of the SDM disto map, exactly at the top of the full field (33.0 mm)\r","% In this case, the offsets of nearest neighbor + extrapolation will be used.\r","function test_bmmo_y_resample_case9\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = +0.009;\r","field_geo.H    = 15e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_9 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_9, test_resampled_ml_9);\r","\r","\r","% image_y_shift and field_geo.H chosen so that the image is completely \r","% outside the SDM disto map, but still inside the full field. In this case,\r","% no interpolation is used, but only extrapolation.\r","function test_bmmo_y_resample_case10\r","load([bmmo_testdata_root filesep 'test_bmmo_y_resample_data']);\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = -16.3e-3;\r","field_geo.H    = 0.2e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","test_resampled_ml_10 = bmmo_y_resample(ml, field_geo, image_y_shift);\r","bmmo_assert_equal(resampled.ml_10, test_resampled_ml_10);\r","\r","\r","% This represents the use case where image is smaller than full field and \r","% shifted below the bottom of field, This use case is not supported and TS \r","% should throw an error in this situation.\r","function test_bmmo_y_resample_case11\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = -10e-3;\r","field_geo.H    = 15e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","try\r","bmmo_y_resample(ml, field_geo, image_y_shift);\r","catch read_err\r","   if ~strcmp(read_err.message, 'Indexes of resampled SDM disto is out of range.')\r","       rethrow(read_err)\r","   end\r","end\r","\r","\r","% This represents the use case where image is smaller than full field and \r","% shifted above the top of field, This use case is not supported and TS \r","% should throw an error in this situation.\r","function test_bmmo_y_resample_case12\r","nwafer = 1;\r","[ml, field_geo] = sub_get_resample_input(nwafer);\r","image_y_shift  = +10e-3;\r","field_geo.H    = 15e-3;\r","\r","ml.layer.wr.dy = ml.wd.yw*1e-7;\r","ml.layer.wr.dx = ml.wd.xw*1e-7;\r","\r","try\r","bmmo_y_resample(ml, field_geo, image_y_shift);\r","catch read_err\r","   if ~strcmp(read_err.message, 'Indexes of resampled SDM disto is out of range.')\r","       rethrow(read_err)\r","   end\r","end\r","\r","\r","function [ml, field_geo] = sub_get_resample_input(nwafer)\r","\r","ml = ovl_average_fields(ovl_create_dummy('marklayout','BA-XY-DYNA-13X19','nlayer',1,'nwafer',nwafer));\r","\r","field_geo.W       = max(ml.wd.xf) - min(ml.wd.xf);\r","field_geo.x_resol = length(unique(ml.wd.xf));\r","field_geo.y_resol = length(unique(ml.wd.yf));\r","\r",""],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[2,3,4,5,6,13,14,15,16,17,19,20,21,22,23,24,25,26,28,29,35,36,37,38,39,41,42,43,44,45,46,48,49,54,55,56,57,58,60,61,63,64,70,71,72,73,74,76,77,79,80,86,87,88,89,90,92,93,95,96,102,103,104,105,106,108,109,111,112,119,120,121,122,123,125,126,128,129,136,137,138,139,140,142,143,145,146,153,154,155,156,157,159,160,162,163,170,171,172,173,174,176,177,179,180,187,188,189,190,192,193,195,196,197,198,199,208,209,210,211,213,214,216,217,218,219,220,227,229,230,231],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}