var sourceData231 = {"FileContents":["function [mlOut, sbcFps] = applySbcToMlCore(mlInfoAppended, corr, correctionFactor, intrafieldOrder)\r","% function [mlOut, sbcFps] = applySbcToMlCore(mlInfoAppended, corr, correctionFactor, intrafieldOrder)\r","%\r","% function called by applySbcToMl that does the actual\r","% (de)correction by combining the SBCs and the OPO ml obtained from\r","% appendInfoToMl\r","%\r","%\r","% Inputs:\r","% - mlInfoAppended        = parsed ADELmetrology containing overlay measurements as produced by\r","%                           ovl_read_adelmetrology and info appended by\r","%                           appendInfoToMl\r","% - corr                 = parsed SBC correction set as produced by\r","%                          bmmo_kt_process_SBC2 / bmmo_kt_process_SBC2rep\r","% - correctionFactor\r","%                        = factor to use when applying SBC fingerprint to ml\r","%                          structure. 1 corresponds to correction, -1 corresponds to\r","%                          decorrection.\r","% - ADELler              = filepath of OPO ADELLer or xml_loaded ADELler\r","% - intrafieldOrder      = order of intrafield corrections fit to the SBC correction\r","%                          set. Possible values are 3 (18 par) and 5 (33 par). 5th\r","%                          order is the default.\r","%\r","% Outputs:\r","% - mlOut                = (de)corrected ml structure in exposure order\r","% - sbcFps               = SBC fingerprint on OPO ml layout\r","% \r","%\r","% Note: This function is not meant to be called separately, only through\r","% applySbcToMl.\r","%\r","\r","\r","\r","% Check whether input SBC is a BMMO NXE or BL3 correction set\r","BMMO_KA_GRID_POINTS = 3721;\r","if length(corr.KA.grid_2de(1).x) > BMMO_KA_GRID_POINTS\r","    options = bl3_default_options_structure;\r","else\r","    options = bmmo_default_options_structure;\r","end\r","\r","% Update intrafield actuation order\r","options = bmmo_options_intraf(options, intrafieldOrder);\r","\r","% Generate the SBC fingerprint on relevant OPO ml layout\r","[sbcFps, ~] = bmmo_apply_SBC_to_ml(mlInfoAppended, corr, 1, options);\r","\r","% (De)correct the generated OPO ml using the total SBC fingerprint\r","mlOut = ovl_combine_linear(mlInfoAppended, 1, sbcFps.TotalSBCcorrection, correctionFactor);\r","\r","end"],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[36,37,38,39,40,44,47,50],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}