var sourceData153 = {"FileContents":["function [x_out, y_out, params] = bmmo_model_map_parms(x_mirr, y_mirr, options, params)\r","% function [x_out, y_out, params] = bmmo_model_map_parms(x_mirr, y_mirr, options, params)\r","% \r","% Remove 10par from the input mirror maps\r","%\r","% Input:\r","%  x_mirr: X mirror map\r","%  y_mirr: Y mirror map\r","%\r","% Optional Input:\r","%  options: BMMO/BL3 option structure\r","%  params: Remove 10 par from mirror maps using the parameters given in\r","%   params (ovl_model format)\r","%\r","% Output:\r","%   x_out: X mirror map with 10par removed\r","%   y_out: Y mirror map with 10par removed\r","%   params: 10 par list in ovl_model format (same as Optional input, if\r","%   provided)\r","\r","if nargin < 3\r","    options = bmmo_default_options_structure;\r","end\r","\r","if nargin < 4\r","    apply_par = 0;\r","else\r","    apply_par = 1;\r","end\r","\r","% create filler zeros and index maps\r","z = zeros(size(y_mirr.x));\r","o = z + 1;\r","xmirr_map = logical([o; z]);\r","ymirr_map = logical([z; o]);\r","\r","% Initialize layout to zeros, overlay to NaN\r","ml.wd.xc = [z; z];\r","ml.wd.yc = ml.wd.xc;\r","ml.wd.xf = ml.wd.xc;\r","ml.wd.yf = ml.wd.xc;\r","ml.layer.wr.dx = nan * ml.wd.xc;\r","ml.layer.wr.dy = nan * ml.wd.yc;\r","\r","% The mirror map coordinates are wafer-centric\r","ml.wd.xc(ymirr_map) = y_mirr.x;\r","ml.wd.yc(xmirr_map) = x_mirr.y;\r","ml.wd.xw = ml.wd.xc;\r","ml.wd.yw = ml.wd.yc;\r","\r","ml.layer.wr.dx(xmirr_map) = x_mirr.dx; \r","ml.layer.wr.dy(ymirr_map) = y_mirr.dy;\r","\r","% single-mark field\r","ml.nwafer = 1;\r","ml.nlayer = 1;\r","ml.nfield = length(ml.wd.xc);\r","ml.nmark = 1;\r","ml.tlgname = '';\r","\r","% Remove edge before calculating 10par\r","ml_noedge = ovl_remove_edge(ml, options.edge_clearance);\r","\r","if ~apply_par \r","    [unused, params] = ovl_model(ml_noedge, '6parwafer'); \r","end\r","\r","%mlr = ovl_model(ml, 'apply', params, -1);\r","mlr = bmmo_apply_model(ml, params, -1, options);\r","\r","x_out = x_mirr;\r","y_out = y_mirr;\r","\r","x_out.dx = mlr.layer.wr.dx(xmirr_map);\r","y_out.dy = mlr.layer.wr.dy(ymirr_map);\r","\r",""],"CoverageData":{"CoveredLineNumbers":[21,25,27,28,32,33,34,35,38,39,40,41,42,43,46,47,48,49,51,52,55,56,57,58,59,62,64,69,71,72,74,75],"UnhitLineNumbers":[22,26,65],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,232,0,232,232,0,0,0,232,232,232,232,0,0,232,232,232,232,232,232,0,0,232,232,232,232,0,232,232,0,0,232,232,232,232,232,0,0,232,0,232,0,0,0,0,232,0,232,232,0,232,232,0,0]}}