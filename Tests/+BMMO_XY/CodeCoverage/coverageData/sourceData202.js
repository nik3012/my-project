var sourceData202 = {"FileContents":["function figs = plotSystemAndLensResidualKpis(ffps, lotDates, machineName, configuration)\r","% figs = plotSystemAndLensResidualKpis(ffps, lotDates, machineName, configuration)\r","%\r","% Function to extract and plot the lens-, system- and total-kpis for\r","% the residuals of inlineSdm for chuck 1 and chuck 2 respectively for the given field fingerprints.\r","%\r","% Input arguments:\r","% - ffps             [ array of structs ]      Structs containing the ffps of the jobs\r","% - lotDates         [ array of datetimes ]    Dates of the jobs\r","% - machineName      [ char array ]            The name of the machine\r","% - configuration    [ function handle ]       Configuration of the machine\r","%                                                for calculating inlineSdm (fe. bmmo_3600D_model_configuration)\r","%\r","% Output arguments:\r","% - figs              [ Array of figures ]     Array containing the figures\r","%                                                with the plotted kpis\r","%\r","\r","import BMMO_XY.populationTooling.plots.*\r","import BMMO_XY.populationTooling.tools.*\r","import BMMO_XY.populationStudy.intraField.getInlineSdmReportsFromMls\r","\r","\r","% Calculate the overlay values of the ffps\r","overlayValues = arrayfun(@(x) ovl_calc_overlay(ffps(x), 'perwafer'), 1 : length(ffps));\r","ffpKpi.chk1.x = extractArrayFromStruct(overlayValues, 'ox100(1)');\r","ffpKpi.chk1.y = extractArrayFromStruct(overlayValues, 'oy100(1)');\r","ffpKpi.chk2.x = extractArrayFromStruct(overlayValues, 'ox100(2)');\r","ffpKpi.chk2.y = extractArrayFromStruct(overlayValues, 'oy100(2)');\r","\r","% Remove the outliers\r","[~, outlierIndexChk1X] = rmoutliers(ffpKpi.chk1.x); ffpKpi.chk1.x(outlierIndexChk1X) = NaN;\r","[~, outlierIndexChk1Y] = rmoutliers(ffpKpi.chk1.y); ffpKpi.chk1.y(outlierIndexChk1Y) = NaN;\r","[~, outlierIndexChk2X] = rmoutliers(ffpKpi.chk2.x); ffpKpi.chk2.x(outlierIndexChk2X) = NaN;\r","[~, outlierIndexChk2Y] = rmoutliers(ffpKpi.chk2.y); ffpKpi.chk2.y(outlierIndexChk2Y) = NaN;\r","\r","% Apply inlineSDM\r","inlineSdmReports = getInlineSdmReportsFromMls(ffps, configuration);\r","\r","% Extract the KPIs\r","lensKpi   = extractInlineSdmLensOvlKpis(inlineSdmReports);\r","systemKpi = extractInlineSdmSystemOvlKpis(inlineSdmReports);\r","totalKpi  = extractInlineSdmTotalOvlKpis(inlineSdmReports);\r","\r","% Plot the values for Chuck 1\r","resetColors;\r","[fig1, ~] = trendLinePlot(lotDates, scaleCellArray({totalKpi.chk1.x, systemKpi.chk1.x, lensKpi.x, ffpKpi.chk1.x}, 10^9), ...\r","                          'valuesDescription', {'Total', 'System', 'Lens', 'Input'}, ...\r","                          'figureUnit', 'inlineSDM residuals max [nm]', ...\r","                          'figureTitle', ['Intrafield inlineSDM: ' machineName '. Chuck 1']);\r","resetColors;\r","[fig1, ~] = trendLinePlot(lotDates, scaleCellArray({totalKpi.chk1.y, systemKpi.chk1.y, lensKpi.y, ffpKpi.chk1.y}, -10^9), 'useFigure', fig1);\r","fig1.CurrentAxes.YAxis(1).Visible = 'off';\r","\r","% Plot the values for Chuck 2\r","resetColors;\r","[fig2, ~] = trendLinePlot(lotDates, scaleCellArray({totalKpi.chk2.x, systemKpi.chk2.x, lensKpi.x, ffpKpi.chk2.x}, 10^9), ...\r","                          'valuesDescription', {'Total', 'System', 'Lens', 'Input'}, ...\r","                          'figureUnit', 'inlineSDM residuals max [nm]', ...\r","                          'figureTitle', ['Intrafield inlineSDM: ' machineName '. Chuck 2']);\r","resetColors;\r","[fig2, ~] = trendLinePlot(lotDates, scaleCellArray({totalKpi.chk2.y, systemKpi.chk2.y, lensKpi.y, ffpKpi.chk2.y}, -10^9), 'useFigure', fig2);\r","fig2.CurrentAxes.YAxis(1).Visible = 'off';\r","\r","% Return the figure handles\r","figs = [fig1, fig2];\r","\r","end"],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[25,26,27,28,29,32,33,34,35,38,41,42,43,46,47,50,51,52,53,56,57,60,61,62,63,66],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}