var sourceData639 = {"FileContents":["function test_suite = test_bmmo_contamination\r","suite = initTestSuite2016(localfunctions);\r","if nargout==0\r","    suite.run();\r","else\r","    test_suite = suite;\r","end\r","\r","% TODO These tests at present purely check that the model does not fail in\r","% certain bad-weather contamination conditions. We should add further\r","% pass/fail criteria.\r","\r","function test_bmmo_spots\r","\r","ml = bmmo_default_input;\r","\r","[sd1, sd2] = bmmo_generate_spots(ml);\r","\r","spots1 = bmmo_simulate_contamination(ml, 'particles', 1, 'spots_definition', sd1);\r","%spots2 = bmmo_simulate_contamination(ml, 'particles', 1, 'spots_definition', sd2);\r","\r","ml = bmmo_add_random_noise(ml);\r","mls1 = ovl_add(ml, spots1);\r","\r","%mls2 = ovl_add(ml, spots2);\r","\r","out = bmmo_nxe_drift_control_model(mls1);\r","%disp(['Outlier coverage: ', num2str(out.report.KPI.input.outlier_coverage)]);\r","\r","% out = bmmo_nxe_drift_control_model(mls2);\r","% disp(['Outlier coverage: ', num2str(out.report.KPI.input.outlier_coverage)]);\r","\r","\r","function test_bmmo_particles\r","\r","ml = bmmo_default_input;\r","ml = bmmo_add_random_noise(ml);\r","\r","contamination = bmmo_simulate_contamination(ml, 'particles', 2, 'particle_size', 10);\r","mls1 = ovl_add(ml, contamination);\r","out = bmmo_nxe_drift_control_model(mls1);\r","%disp(['Outlier coverage: ', num2str(out.report.KPI.input.outlier_coverage)]);\r","\r","function test_bmmo_outliers\r","\r","ml = bmmo_default_input;\r","ml = bmmo_add_random_noise(ml);\r","\r","contamination = bmmo_simulate_contamination(ml, 'outliers', 10, 'outliers_error', 10);\r","\r","mls1 = ovl_add(ml, contamination);\r","out = bmmo_nxe_drift_control_model(mls1);\r","%disp(['Outlier coverage: ', num2str(out.report.KPI.input.outlier_coverage)]);\r","\r","\r","function test_bmmo_noise\r","\r","ml = bmmo_default_input;\r","ml = bmmo_add_random_noise(ml);\r","\r","contamination = bmmo_simulate_contamination(ml,'noise', 9);\r","mls1 = ovl_add(ml, contamination);\r","out = bmmo_nxe_drift_control_model(mls1);\r","%disp(['Outlier coverage: ', num2str(out.report.KPI.input.outlier_coverage)]);\r","\r","function test_bmmo_mirror_noise\r","\r","ml = bmmo_default_input;\r","ml = bmmo_add_random_noise(ml);\r","mlm = bmmo_add_random_noise(ml, 'mirror');\r","\r","out = bmmo_nxe_drift_control_model(ml);\r","out2 = bmmo_nxe_drift_control_model(mlm);\r","\r","% close all;\r","% mirror_figs({out.corr.MI.wse, out2.corr.MI.wse}, {'basic noise', 'added MI noise'}, [-0.15, 0.15 -0.8e-9 0.8e-9]);\r","\r","\r","\r","\r","\r","\r",""],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[2,3,4,5,6,15,17,19,22,23,27,36,37,39,40,41,46,47,49,51,52,58,59,61,62,63,68,69,70,72,73],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}