var sourceData701 = {"FileContents":["% Changelog\r","% 2016-09-26  SBPR  creation\r","% 2018-12-20  SELR  added correct shifts\r","\r","\r","function test_suite = test_bmmo_reference_mmo\r","suite = initTestSuite2016(localfunctions);\r","if nargout==0\r","    suite.run();\r","else\r","    test_suite = suite;\r","end\r","\r","\r","function test_bmmo_reference_mmo_proto\r","\r","% load the bmmo input and reference atp\r","load([bmmo_testdata_root filesep 'atp_reference_input.mat']);\r","load([bmmo_testdata_root filesep 'bmmo_verification_input.mat']);\r","\r","% calculate the overlay of the reference atp after mmo modelling\r","ref_mmo = ovl_bmmo_model_mmo(atp_tlg);\r","ov_ref = ovl_calc_overlay(ref_mmo, 'vector');\r","\r","input_struct.configurable_options.x_shift = [0 -260e-6; 0 -260e-6];\r","input_struct.configurable_options.y_shift = [0 -40e-6; 0 -40e-6];\r","input_struct.info.previous_correction = bmmo_add_missing_corr(input_struct.info.previous_correction);\r","% generate an sbc correction\r","out = bmmo_nxe_drift_control_model(input_struct);\r","sbc = out.corr;\r","\r","% apply it on the reference\r","fps = bmmo_apply_SBC_to_ml(atp_tlg, sbc);\r","ref_corr = ovl_add(atp_tlg, fps.TotalSBCcorrection);\r","\r","% calculate the overlay of the SBC-corrected reference after mmo modelling\r","ref_corr_mmo = ovl_bmmo_model_mmo(ref_corr);\r","ov_corr = ovl_calc_overlay(ref_corr_mmo, 'vector');\r","\r","% get the difference and check it is within spec\r","assert(ov_corr.ov997 <= sqrt((ov_ref.ov997.^2) + (6e-10).^2));"],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[7,8,9,10,11,18,19,22,23,25,26,27,29,30,33,34,37,38,41],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}