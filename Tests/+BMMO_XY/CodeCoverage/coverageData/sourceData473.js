var sourceData473 = {"FileContents":["function [fp_struct, ff_6p] = bmmo_apply_SBC_to_ml_inline_SDM(ml_template, corr, factor, options, skip_sdm)\r","% function [fp_struct, ff_6p] = bmmo_apply_SBC_to_ml_inline_SDM(ml_template, corr, factor, options, skip_sdm)\r","%\r","% Generate a list of SBC correction ml structures from a given template ml\r","% and an SBC correction. Intrafield is modeled by simulating \r","% inline SDM. Access to the projection toolbox is needed to perform this\r","% simulation.\r","% \r","% This function expects some extra info in the input ml_template, for \r","% details see bmmo_parse_apply_SBC_to_ml_options.  \r","%\r","% Input: \r","%   ml_template: a valid ml structure in any layout, in case of an ml struct  \r","%       in bmmo layout (output of bmmo_process_input), the accompanying\r","%       options structure should be provided as the last input argument\r","%   corr: a valid correction set from the BMMO-NXE drift control model,\r","%       e.g. the output of bmmo_nxe_drift_control_model (out.corr) or\r","%       bmmo_kt_process_SBC2\r","%   factor: A constant factor to apply to the fingerprints (default = 1)\r","%   options: bmmo_options structure belonging to ml_template\r","%   skip_sdm: Skips modeling using InlineSDM model if set to 1.(default = 0).\r","%             In case skip_sdm = 1, corr.ffp is directly resampled and \r","%             distributed to ml_template to calculate the intrafield\r","%             fingerprint.\r","%\r","% Output:\r","%   fp_struct: structure containing the following (all ml structures, same layout as ml_template)\r","%       WH: Wafer Heating fingerprint\r","%       MI:  Mirror fingerprint \r","%       KA: KA fingerprint \r","%       BAO:  BAO fingerprint \r","%       INTRAF: INTRAF fingerprint\r","%       TotalSBCcorrection: sum of the other fingerprints\r","%   ff_6p: 6par feedforward BAO fingerprint from MI@M & KA@M corrections\r","%\r","% 20191022 SELR Creation from bmmo_apply_SBC\r","% 20191120 SELR Added WH fingerprint generation\r","% 20200616 ANBZ Updated for KA@M ff 6par Fingerprint\r","\r","BMMO_KA_GRID_POINTS = 3721;\r","\r","if nargin < 3\r","    factor = 1;\r","end\r","if nargin < 4\r","    if length(corr.KA.grid_2de(1).x) > BMMO_KA_GRID_POINTS\r","        options = bl3_default_options_structure;\r","    else\r","        options = bmmo_default_options_structure;\r","    end\r","end\r","if nargin < 5\r","    skip_sdm = 0;\r","end\r","\r","if ~skip_sdm\r","    options.intraf_actuation.fnhandle = @bmmo_INTRAF_inline_SDM_fingerprint;\r","else\r","    options.intraf_actuation.fnhandle = @bmmo_INTRAF_resampled_fingerprint;\r","end\r","\r","options = bmmo_parse_apply_SBC_to_ml_options(ml_template, options);\r","[fp_struct, ff_6p] = bmmo_apply_SBC_core(ml_template, corr, factor, options);\r",""],"CoverageData":{"CoveredLineNumbers":[],"UnhitLineNumbers":[40,42,43,45,46,47,48,49,52,53,56,57,58,59,62,63],"HitCount":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}